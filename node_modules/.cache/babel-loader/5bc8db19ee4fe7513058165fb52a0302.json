{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win10\\\\Desktop\\\\bookStore\\\\project\\\\src\\\\context\\\\Context.js\";\nimport React, { createContext, useReducer, useEffect } from \"react\";\nimport books from \"../data/books.json\";\nimport reducer from \"./Reducer\";\nconst initialState = {\n  books: books,\n  searchString: null,\n  searchedBooks: [],\n  carts: []\n};\nexport const Context = createContext(initialState);\nexport const Provider = ({\n  children\n}) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    if (localStorage.getItem(\"carts\") !== null) {\n      const fetchedCarts = JSON.parse(localStorage.getItem(\"carts\"));\n      fetchCarts(fetchedCarts);\n    }\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(\"carts\", JSON.stringify(state.carts));\n  }, [state.carts]); //actions\n\n  const fetchCarts = fetchedCarts => {\n    dispatch({\n      type: \"FETCH_CART\",\n      payload: fetchedCarts\n    });\n  };\n\n  const addCart = id => {\n    dispatch({\n      type: \"ADD_CART\",\n      payload: id\n    });\n  };\n\n  const updateCart = (id, quantity) => {\n    dispatch({\n      type: \"UPDATE_CART\",\n      payload: {\n        id,\n        quantity\n      }\n    });\n  };\n\n  const removeCart = id => {\n    dispatch({\n      type: \"REMOVE_CART\",\n      payload: id\n    });\n  };\n\n  const getSearchString = searchString => {\n    dispatch({\n      type: \"GET_SEARCHED_STRING\",\n      payload: searchString\n    });\n  };\n\n  const getSearchedBooks = searchString => {\n    getSearchString(searchString);\n    dispatch({\n      type: \"GET_SEARCHED_BOOKS\",\n      payload: searchString\n    });\n  };\n\n  const clearSearch = () => {\n    dispatch({\n      type: \"CLEAR_SEARCH\"\n    });\n  };\n\n  return React.createElement(Context.Provider, {\n    value: {\n      books: state.books,\n      carts: state.carts,\n      searchedBooks: state.searchedBooks,\n      searchString: state.searchString,\n      addCart,\n      updateCart,\n      removeCart,\n      getSearchString,\n      getSearchedBooks,\n      clearSearch,\n      fetchCarts\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, children);\n};","map":{"version":3,"sources":["C:/Users/win10/Desktop/bookStore/project/src/context/Context.js"],"names":["React","createContext","useReducer","useEffect","books","reducer","initialState","searchString","searchedBooks","carts","Context","Provider","children","state","dispatch","localStorage","getItem","fetchedCarts","JSON","parse","fetchCarts","setItem","stringify","type","payload","addCart","id","updateCart","quantity","removeCart","getSearchString","getSearchedBooks","clearSearch"],"mappings":"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","sourcesContent":["import React, { createContext, useReducer, useEffect } from \"react\";\r\nimport books from \"../data/books.json\";\r\nimport reducer from \"./Reducer\";\r\n\r\nconst initialState = {\r\n  books: books,\r\n  searchString: null,\r\n  searchedBooks: [],\r\n  carts: []\r\n};\r\n\r\nexport const Context = createContext(initialState);\r\n\r\nexport const Provider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"carts\") !== null) {\r\n      const fetchedCarts = JSON.parse(localStorage.getItem(\"carts\"));\r\n      fetchCarts(fetchedCarts);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"carts\", JSON.stringify(state.carts));\r\n  }, [state.carts]);\r\n\r\n  //actions\r\n  const fetchCarts = fetchedCarts => {\r\n    dispatch({\r\n      type: \"FETCH_CART\",\r\n      payload: fetchedCarts\r\n    });\r\n  };\r\n\r\n  const addCart = id => {\r\n    dispatch({\r\n      type: \"ADD_CART\",\r\n      payload: id\r\n    });\r\n  };\r\n\r\n  const updateCart = (id, quantity) => {\r\n    dispatch({\r\n      type: \"UPDATE_CART\",\r\n      payload: { id, quantity }\r\n    });\r\n  };\r\n\r\n  const removeCart = id => {\r\n    dispatch({\r\n      type: \"REMOVE_CART\",\r\n      payload: id\r\n    });\r\n  };\r\n\r\n  const getSearchString = searchString => {\r\n    dispatch({\r\n      type: \"GET_SEARCHED_STRING\",\r\n      payload: searchString\r\n    });\r\n  };\r\n\r\n  const getSearchedBooks = searchString => {\r\n    getSearchString(searchString);\r\n    dispatch({\r\n      type: \"GET_SEARCHED_BOOKS\",\r\n      payload: searchString\r\n    });\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    dispatch({\r\n      type: \"CLEAR_SEARCH\"\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Context.Provider\r\n      value={{\r\n        books: state.books,\r\n        carts: state.carts,\r\n        searchedBooks: state.searchedBooks,\r\n        searchString: state.searchString,\r\n        addCart,\r\n        updateCart,\r\n        removeCart,\r\n        getSearchString,\r\n        getSearchedBooks,\r\n        clearSearch,\r\n        fetchCarts\r\n      }}\r\n    >\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}